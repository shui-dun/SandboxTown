# 概要设计文档

## 1. 系统模块划分

根据需求，我们可以将系统划分为以下模块：

1. 用户模块
2. 地图模块
3. 建筑模块
4. 经济模块
5. 任务模块
6. 多人游戏模块
7. AI虚拟人物模块

## 2. 模块之间的关系和交互方式

### 2.1 用户模块

用户模块负责处理用户的注册、登录、权限管理等功能。与其他模块的交互主要包括：

- 向地图模块提供用户权限信息，以判断用户是否可以创建新地图
- 向经济模块提供用户信息，以便记录用户的金钱和经验值
- 向任务模块提供用户信息，以便记录用户的任务进度
- 向多人游戏模块提供用户信息，以便实现玩家间的互动

### 2.2 地图模块

地图模块负责地图的生成、存储和加载。与其他模块的交互主要包括：

- 接收用户模块提供的用户权限信息，判断用户是否可以创建新地图
- 向建筑模块提供地图信息，以便在地图上放置建筑物
- 向任务模块提供地图信息，以便生成任务相关的地点和事件

### 2.3 建筑模块

建筑模块负责建筑物的创建、修改和删除。与其他模块的交互主要包括：

- 接收地图模块提供的地图信息，以便在地图上放置建筑物
- 向经济模块提供建筑物信息，以便计算收益和支出
- 向任务模块提供建筑物信息，以便生成与建筑物相关的任务

### 2.4 经济模块

经济模块负责处理游戏内的金钱和经验值。与其他模块的交互主要包括：

- 接收用户模块提供的用户信息，以便记录用户的金钱和经验值
- 接收建筑模块提供的建筑物信息，以便计算收益和支出
- 向任务模块提供金钱和经验值信息，以便作为任务奖励

### 2.5 任务模块

任务模块负责生成和管理游戏任务。与其他模块的交互主要包括：

- 接收用户模块提供的用户信息，以便记录用户的任务进度
- 接收地图模块提供的地图信息，以便生成任务相关的地点和事件
- 接收建筑模块提供的建筑物信息，以便生成与建筑物相关的任务
- 向经济模块请求金钱和经验值信息，以便作为任务奖励

### 2.6 多人游戏模块

多人游戏模块负责实现玩家间的互动。与其他模块的交互主要包括：

- 接收用户模块提供的用户信息，以便实现玩家间的互动
- 向地图模块请求地图信息，以便在多人游戏中共享地图
- 向建筑模块请求建筑物信息，以便在多人游戏中共享建筑物

### 2.7 AI虚拟人物模块

AI虚拟人物模块负责生成和管理基于ChatGPT的AI虚拟人物。与其他模块的交互主要包括：

- 向任务模块提供AI虚拟人物信息，以便生成与AI虚拟人物相关的任务
- 向多人游戏模块提供AI虚拟人物信息，以便在多人游戏中实现与AI虚拟人物的互动

## 3. 技术选型

- 前端：Phaser.js (游戏开发框架), Vue (前端框架)
- 通信：websocket, http
- 后端：Spring Boot
- 数据库：Mysql & Redis (存储实时数据)

